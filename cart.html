<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Bag | HYPE CULTURED</title>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="cart_style.css">
</head>
<body>

<nav>
    <div class="brand">
        <h1 onclick="location.href='index.html'" style="cursor:pointer;">HYPE CULTURED&reg;</h1>
        <small>GOES BEYOND</small>
    </div>
    <div class="nav-links">
        <a href="index.html">HOME</a>
        <a href="about.html">ABOUT</a>
        <a href="collection.html">COLLECTION</a>
        <a href="contact.html">CONTACT</a>
    </div>
    
</nav>

<div class="cart-container">
    <div class="page-header">
        <h2>SHOPPING BAG</h2>
        <p id="total-items-count">0 ITEMS</p>
    </div>

    <div class="cart-layout">
        <div class="cart-items-section">
            <div class="cart-header-row">
                <span>PRODUCT</span>
                <span>PRICE</span>
                <span style="text-align:center">QTY</span>
                <span>TOTAL</span>
                <span></span>
            </div>

            <div id="full-cart-display">
                </div>

           <div class="shipping-policy-box">
    <h3>SECURE SHIPPING PROCESS</h3>
    <ul class="policy-list">
        <li>
            <strong>AUTHENTICATION:</strong> 
            <span>All items are verified by experts within 24 hours.</span>
        </li>
        <li>
            <strong>PROCESSING:</strong> 
            <span>Dispatched within 1-2 business days after verification.</span>
        </li>
        <li>
            <strong>DELIVERY:</strong> 
            <span>3-5 days via Premium Courier (DHL/FedEx).</span>
        </li>
    </ul>
</div><div class="shipping-policy-box">
    </div>

<div class="warranty-box">
    <h3>WARRANTY & REFUND POLICY</h3>
    
    <ol class="policy-ordered-list">
        <li>
            <strong>RETURN WINDOW:</strong>
            <span>Items must be returned within 7 days of receipt.</span>
        </li>

        <li>
            <strong>ITEM CONDITION:</strong>
            <span style="display:block; margin-bottom:5px;">Items must be returned in original condition:</span>
            <ul class="policy-sub-list">
                <li>Unworn and unwashed.</li>
                <li>Original tags attached.</li>
                <li>In original packaging.</li>
            </ul>
        </li>

        <li>
            <strong>NON-REFUNDABLE:</strong>
            <ul class="policy-sub-list">
                <li>Accessories (Socks, Masks).</li>
                <li>Sale / Clearance items.</li>
            </ul>
        </li>

        <li>
            <strong>REFUND PROCESS:</strong>
            <span>Refunds are processed to the original payment method within 5-10 business days.</span>
        </li>
    </ol>
</div>
        </div>

        <aside class="cart-summary">
            <h3>ORDER SUMMARY</h3>

            <div class="summary-row">
                <span>SUBTOTAL</span>
                <span id="summary-subtotal">RM 0.00</span>
            </div>

            <div class="summary-row">
                <span>SHIPPING&nbsp;  </span>
                <span>  FREE</span>
            </div>

            <div class="summary-row summary-total">
                <span>TOTAL</span>
                <span id="summary-total">RM 0.00</span>
            </div>

            <button class="checkout-btn" onclick="processCheckout()">
                CHECKOUT NOW
            </button>

            <a href="collection.html" class="continue-shopping">
                ← CONTINUE SHOPPING
            </a>
        </aside>
    </div>
</div>

<footer>
    <div class="footer-grid">
        <div class="footer-brand">
            <h2>HYPE CULTURED</h2>
            <small>GOES BEYOND</small>
            <p style="font-size: 0.7rem; opacity: 0.6; line-height: 1.6; margin-top: 15px;">
                A collective movement focused on premium aesthetics and the evolution of urban identity.
            </p>
        </div>

        <div class="footer-column">
    <h4>SUPPORT</h4>
    <ul>
        <li><a href="contact.html">CONTACT US</a></li>
        <li><a href="collection.html">SHOP NOW</a></li>
        <li><a href="#">RETURNS</a></li>
        <li style="margin-top: 10px;">
            <a href="sitemap.html" style="color: #c5a059; font-weight: 700;">⭐ SITE MAP</a>
        </li>
    </ul>
</div>

        <div class="footer-column">
            <h4>COMPANY</h4>
            <ul>
                <li><a href="about.html">OUR STORY</a></li>
                <li><a href="https://hype.my" target="_blank">HEAD QUARTERS</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h4>FOLLOW</h4>
            <div class="social-icons">
                <a href="https://instagram.com" target="_blank" aria-label="Instagram">
                    <i class="fa-brands fa-instagram"></i>
                </a>
                <a href="https://tiktok.com" target="_blank" aria-label="TikTok">
                    <i class="fa-brands fa-tiktok"></i>
                </a>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <div style="display: flex; flex-direction: column; gap: 5px;">
            <span>&copy; <span id="copyright-date">2026</span> HYPE CULTURED STUDIO. ALL RIGHTS RESERVED.</span>
            <span style="font-size: 0.6rem; color: #888;">LAST UPDATE: <span id="last-update">...</span></span>
        </div>
        <span style="color: #c5a059; font-weight: 700;">GOES BEYOND.</span>
    </div>
</footer>

<div id="checkout-modal" class="modal">
    <div class="modal-content checkout-content">
        <span class="close-modal" onclick="closeCheckout()">&times;</span>
        
        <div class="checkout-header">
            <h3>SECURE CHECKOUT</h3>
            <p>HYPE CULTURED STUDIO</p>
        </div>

        <div id="checkout-phase-1">
            <form id="checkout-form" onsubmit="event.preventDefault(); handlePaymentSelection();">
                <div class="checkout-section">
                    <h4>SHIPPING DETAILS</h4>
                    <input type="text" id="cust-name" placeholder="FULL NAME" required class="hype-input">
                    <input type="tel" id="cust-phone" placeholder="PHONE NUMBER (+60)" required class="hype-input">
                    <textarea id="cust-address" placeholder="FULL SHIPPING ADDRESS" required class="hype-input" rows="3"></textarea>
                </div>

                <div class="checkout-section">
                    <h4>PAYMENT METHOD</h4>
                    <div class="payment-options">
                        <label class="payment-card">
                            <input type="radio" name="payment" value="fpx" checked>
                            <div class="card-visual">
                                <span>ONLINE BANKING (FPX)</span>
                                <small>Maybank2u / CIMB</small>
                            </div>
                        </label>
                        <label class="payment-card">
                            <input type="radio" name="payment" value="card">
                            <div class="card-visual">
                                <span>CREDIT / DEBIT CARD</span>
                                <small>Visa / Mastercard</small>
                            </div>
                        </label>
                        <label class="payment-card">
                            <input type="radio" name="payment" value="qr">
                            <div class="card-visual">
                                <span>QR PAY / E-WALLET</span>
                                <small>Upload Receipt</small>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="checkout-footer">
                    <div class="total-display">
                        <span>TOTAL TO PAY:</span>
                        <span id="checkout-final-total" style="color: #c5a059; font-size: 1.3rem;">RM 0.00</span>
                    </div>
                    <button type="submit" class="pay-btn">PROCEED TO PAYMENT</button>
                </div>
            </form>
        </div>

        <div id="checkout-phase-qr" style="display: none; text-align: center;">
            <div style="background: #f9f9f9; padding: 30px; margin-bottom: 20px; border: 1px solid #eee;">
                <p style="font-size: 0.8rem; letter-spacing: 2px; margin-bottom: 15px; font-weight:700;">SCAN TO PAY</p>
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=DUITNOW-HYPE-CULTURED" 
                     alt="DuitNow QR" 
                     style="width: 160px; border: 5px solid #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                <h2 style="margin: 20px 0; color: #c5a059;" id="qr-amount-display">RM 0.00</h2>
            </div>
            <div class="upload-section">
                <p style="font-size: 0.7rem; font-weight: 700; margin-bottom: 10px; text-align:left;">UPLOAD RECEIPT:</p>
                <input type="file" id="payment-proof" accept="image/*" class="file-input">
            </div>
            <div class="checkout-footer">
                <button onclick="submitQrReceipt()" class="pay-btn">CONFIRM PAYMENT</button>
                <button onclick="backToPhase1()" style="background:none; border:none; margin-top:15px; font-size:0.7rem; color:#888; cursor:pointer; text-decoration:underline;">&larr; BACK TO DETAILS</button>
            </div>
        </div>
    </div>
</div>

<div id="payment-loader" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:3000; align-items:center; justify-content:center; flex-direction:column; color:white;">
    <div class="spinner" style="border: 4px solid #333; border-top: 4px solid #c5a059; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin-bottom: 20px;"></div>
    <h3 style="letter-spacing: 3px;">PROCESSING PAYMENT...</h3>
</div>
<style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>

<script src="main_script.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {
    renderFullCart();
});

function renderFullCart() {
    const display = document.getElementById('full-cart-display');
    const cartCountHeader = document.getElementById('total-items-count');
    const summarySubtotal = document.getElementById('summary-subtotal');
    const summaryTotal = document.getElementById('summary-total');

    let cart = JSON.parse(localStorage.getItem('hype_cart')) || [];

    if (cart.length === 0) {
        display.innerHTML = `
            <div style="padding:100px 0; text-align:center;">
                <p style="color:#999; letter-spacing:2px; font-size:0.9rem; margin-bottom:20px;">YOUR BAG IS EMPTY.</p>
                <a href="collection.html" style="font-size:0.75rem; font-weight:700; border-bottom:2px solid #c5a059; padding-bottom:3px; letter-spacing:2px; text-decoration:none; color:#000;">SHOP COLLECTION</a>
            </div>
        `;
        cartCountHeader.innerText = "0 ITEMS";
        summarySubtotal.innerText = "RM 0.00";
        summaryTotal.innerText = "RM 0.00";
        return;
    }

    let totalAmount = 0;
    let totalItems = 0;

    display.innerHTML = cart.map(item => {
        const priceValue = parseFloat(item.price) || 0;
        const qty = parseInt(item.quantity) || 0;
        const subtotal = priceValue * qty;

        totalAmount += subtotal;
        totalItems += qty;
        
        const displaySize = item.size ? item.size : 'UNI';

        return `
            <div class="cart-item">
                <div class="item-info">
                    <img src="${item.img}" alt="${item.name}">
                    <div class="item-details">
                        <h4>${item.name}</h4>
                        <p>SIZE: <span style="color:#000; font-weight:700;">${displaySize}</span></p>
                        <p>ID: ${item.id}</p>
                    </div>
                </div>
                
                <div class="item-price">RM ${priceValue.toFixed(2)}</div>
                
                <div class="qty-control">
                    <button onclick="updateQty('${item.id}', '${displaySize}', -1)">-</button>
                    <span>${qty}</span>
                    <button onclick="updateQty('${item.id}', '${displaySize}', 1)">+</button>
                </div>
                
                <div class="item-subtotal">RM ${subtotal.toFixed(2)}</div>
                
                <button class="remove-item" onclick="removeFromBag('${item.id}', '${displaySize}')">&times;</button>
            </div>
        `;
    }).join('');

    cartCountHeader.innerText = `${totalItems} ITEMS`;
    summarySubtotal.innerText = `RM ${totalAmount.toFixed(2)}`;
    summaryTotal.innerText = `RM ${totalAmount.toFixed(2)}`;
}


function updateQty(id, size, change) {
    let cart = JSON.parse(localStorage.getItem('hype_cart')) || [];
    
    const index = cart.findIndex(item => item.id === id && item.size === size);
    
    if (index > -1) {
        cart[index].quantity += change;
        
        if (cart[index].quantity <= 0) {
            cart.splice(index, 1);
        }
        
        localStorage.setItem('hype_cart', JSON.stringify(cart));

        renderFullCart();
        if (typeof updateCartBadge === 'function') updateCartBadge();
    }
}


function removeFromBag(id, size) {
    let cart = JSON.parse(localStorage.getItem('hype_cart')) || [];
    
    cart = cart.filter(item => !(item.id === id && item.size === size));
    
    localStorage.setItem('hype_cart', JSON.stringify(cart));
    
    renderFullCart();
    if (typeof updateCartBadge === 'function') updateCartBadge();
}
</script>
<div id="receipt-modal" class="modal" style="display:none;">
    <div class="modal-content receipt-card">
        <div id="receipt-printable-area">
            <div class="receipt-header">
                <h2>HYPE CULTURED®</h2>
                <p>ORDER CONFIRMATION</p>
                <div class="receipt-divider"></div>
            </div>
            
            <div class="receipt-info">
                <p><strong>ORDER ID:</strong> <span id="r-order-id">#HC-99821</span></p>
                <p><strong>DATE:</strong> <span id="r-date">...</span></p>
                <p><strong>CUSTOMER:</strong> <span id="r-name">...</span></p>
            </div>

            <table class="receipt-table">
                <thead>
                    <tr>
                        <th>ITEM</th>
                        <th style="text-align:center">QTY</th>
                        <th style="text-align:right">SUBTOTAL</th>
                    </tr>
                </thead>
                <tbody id="r-items-list">
                    </tbody>
            </table>

            <div class="receipt-total-section">
                <div class="total-row">
                    <span>GRAND TOTAL</span>
                    <span id="r-total" class="gold-text">RM 0.00</span>
                </div>
                <p class="payment-method-text">PAID VIA: <span id="r-method">...</span></p>
            </div>

            <div class="receipt-footer">
                <p>THANK YOU FOR JOINING THE CULTURE.</p>
                <small>Hype Cultured Tower, Cyberjaya, Selangor.</small>
            </div>
        </div>

        <div class="receipt-actions">
            <button onclick="window.print()" class="print-btn"><i class="fa-solid fa-print"></i> PRINT / SAVE PDF</button>
            <button onclick="location.href='index.html'" class="home-btn">RETURN HOME</button>
        </div>
    </div>
</div>
</body>
</html>
